<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Binary pre-release of CeGCC for Linux</title>
<img src="images/banner1.png" alt="CeGCC cross compiler for PocketPC">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body>
<H1>Binary pre-release of CeGCC for Linux</H1>
<p>
<font size="+1">
	The latest binary pre-release for Linux is available for download at
	<a href="http://prdownloads.sourceforge.net/cegcc/cegcc-linux-0.06.tar.gz?download">
		http://prdownloads.sourceforge.net/cegcc/cegcc-linux-0.06.tar.gz?download</a>.
	(<i>Previous versions, are also still available at 
		<a href="http://sourceforge.net/project/showfiles.php?group_id=173455">
		http://sourceforge.net/project/showfiles.php?group_id=173455</a></i>.)
It contains a set of executables, include files, and libraries that can be
used on a Linux PC (Intel architecture) to build applications that'll run
on a Windows CE platform with an ARM (aka Intel Xscale) processor.
In my case, the Linux platform is Mandriva 2006.0,
the PC is a no brand Pentium IV (assembled it myself),
and the PDA is a Mio 168 running Windows CE 4.20.0.
The Mio's processor is an Intel PXA 255.
<H2>Goal</H2>
<p>
The goal of this pre-release is timely distribution of the latest goodies,
knowing full well that there are problems.
Several testers have reported issues in building this release from the source
(which is freely available in the 
<a href="http://sourceforge.net/svn/?group_id=173455"> project's SVN Repository </a>).
The binary distribution is a way to get past those issues for now.
<p>
Feedback about this software should be sent to the CeGCC mailing list at
<a href="mailto:cegcc-devel@lists.SourceForge.net">cegcc-devel@lists.sourceforge.net</a>.
Questions, bug reports, .. should be addressed to that same address.
<p>
<H2>How do you use the binary pre-release ?</H2>
<br>
The pre-release is the result of building the linux version of cegcc,
using the scripts/linux/build.sh script as it is in the SVN.
This means that the end result of the build should be in <i>/usr/ppc</i>.
To use this software,
become root (or another user which has write access to /usr on your system),
and unpack the distribution, as indicated below :
<pre>
% su
<b>Password: </b> <i>enter the root password</i>
# cd /usr
# tar xfz /tmp/cegcc-linux-0.03.tar.gz
# exit
%
</pre>
<p>
Then make sure that the directory <i>/usr/ppc/bin</i> is part of your path.
(<i>Note that 0.02 was different in that it required you to unpack from / not /usr.</i>)
<p>
You can test the compiler by trying to compile
<a href="docs/examples/fibo.c">fibo.c</a> :
<pre>
	#include &lt;windows.h&gt;
	#include &lt;stdio.h&gt;
	#include &lt;stdlib.h&gt;

	#define	FN	"/storage card/devel/fibo.txt"

	int fibo(int n)
	{
		if (n &lt; 3)
			return 1;
		return fibo(n-1) + fibo(n-2);
	}

	int APIENTRY WinMain(HINSTANCE a,HINSTANCE b,LPWSTR c,int d)
	{
		FILE	*f;
		int	i, r;

		f = fopen(FN, "w");

		for (i=1; i&lt;20; i++) {
			r = fibo(i);
			fprintf(f, "fibo(%d) = %d\r\n", i, r);
		}
		fclose(f);
	}
</pre>
<p>
You may want to change the path where the program writes its output file
in case you don't have that directory structure on your PDA.
<p>
Compile the source by using either of these commands :
<pre><i>
	arm-wince-cegcc-gcc -o f.exe fibo.c
	arm-wince-cegcc-gcc -g -o fibo.exe fibo.c
</i></pre>
On my system, this produces this warning message :
<pre><i>
	fibo.c:16: warning: '__stdcall__' attribute directive ignored
</i></pre>
<p>
but the command successfully creates an executable file
<i>f.exe</i> which can be transferred and run on a Windows CE system.
You can download my version of
<a href="docs/examples/f.exe">f.exe</a>
or
<a href="docs/examples/fibo.exe">fibo.exe</a>
for comparison.
The latter is significantly larger because of the debugging information
included in the file (consequence of using the -g option).
</font>
<H2>Known problems</H2>
<P>
<H3></H3>
<P>
<i>Compiling a new executable for the Crosswords application
appears to work, but creates an executable file that doesn't execute:
Windows CE tells that it is "not a valid Pocket PC application".
</i>
<p>
<b>(Somewhat) solved :</b> this is due to an invalid aygshell.def file from which we
were generating the libaygshell.a library,
which in turn is some kind of a proxy for the Windows CE DLL <i>aygshell.dll</i>.
(The library is used at link time, the DLL is a runtime component.
They must match one another, but I haven't figured out the details yet.)
<H3></H3>
<P>
When compiling the debugging stub (src/gdb/gdb/wince-stub.c) with the -mno-cegcc compiler option,
the resulting executable doesn't work.
<P>
<!--
  
     Button row at the top of the page.
  
  -->
<table bgcolor="blue" border="6"> <tr>
	<td bgcolor="#CCCC00" > <font size="+2" color="#222200">
		<a href="http://cegcc.sf.net/docs/index.html">
			Documentation
		</a>
	</font> </td>
	<td bgcolor="#CCCC00" > <font size="+2" color="#222200">
			<a href="http://svn.sourceforge.net/cegcc">
			SVN Repository
		</a>
	</font> </td>
	<td bgcolor="#CCCC00" > <font size="+2" color="#222200">
			<a href="http://sf.net/projects/cegcc">
			Project page on SourceForge
		</a>
	</font> </td>
	<td bgcolor="#CCCC00" > <font size="+2" color="#222200">
			<a href="http://sf.net/project/showfiles.php?group_id=173455">
			Download
		</a>
	</font> </td>
	<td bgcolor="#CCCC00" > <font size="+2" color="#222200">
		<a href="prerelease.html">
			Binary pre-release for Linux
		</a>
	</font> </td>
</tr></table>
<!--

     End of the button row

  -->
</p>
</body>
</html>
